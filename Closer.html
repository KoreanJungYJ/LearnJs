<html>
    <head>
        <title>The bug of Closer</title>
        <meta charset="utf-8">
        <script type="text/javascript">
            function funcIDCreate(thecelebrities){
                var i; // 지역 변수 i 선언
                var uniqueID=100; //지역 변수 uniqueID값 100
                for(i=0;i<thecelebrities.length;i++){//배열 길이 만큼 후위 연산
                    thecelebrities[i]["id"]=function(){
                        return uniqueID+i;
                    }
                }
                return thecelebrities; // 반환
            }
            var actionceleb=[
                {name:"Caden", id:0},
                {name:"James_Johnson",id:0},
                {name:"GaryMarkson",id:0}
            ]; //객체 리터럴 선언 :값 3개
            var createID=funcIDCreate(actionceleb);
            //함수에 배열 값 집어넣어주고 createID에 저장
            var stallon=createID[0];
            console.log(stallon);
            //결과 값:103
            //원래 예상대로라면 100,101,102가 되어야 하지만 익명의 내부함수가 실행될 시점에 id값은 3이되어 모든 리턴된 배열의 id값이 103이 된다.
            
            //클로저는 외부 변수에 대해 값이 아닌 참조로 접근하기 때문에 외부 함수가 전체 for문을 실행하고 리턴한 최종 i값을 리턴하게 된다.
        </script>
    </head>
    <body>
        
    </body>
</html>